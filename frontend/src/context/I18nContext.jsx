import { createContext, useContext, useEffect, useMemo, useState } from "react";

const I18nContext = createContext();

const translations = {
  en: {
    "CELL": "HI-TECH",
    "HOME": "HOME",
    "DEVICE": "DEVICE",
    "CATEGORY": "CATEGORY",
    "PRODUCTS": "PRODUCTS",
    "ADMIN": "ADMIN",
    "ADMIN ORDERS": "ADMIN ORDERS",
    "MY ORDERS": "MY ORDERS",
    "PROFILE": "PROFILE",
    "WISHLIST": "WISHLIST",
    "WARRANTY": "WARRANTY",
    "FAQ": "FAQ",
    "ABOUT US": "ABOUT US",
    "Login": "Login",
    "Logout": "Logout",
    "ROHS | REACH | SVHC | CE COMPLIANT": "ROHS | REACH | SVHC | CE COMPLIANT",
    "Free shipping above €999": "Free shipping above €999",
    "1-year warranty on select devices": "1-year warranty on select devices",
    "24/7 support for all orders": "24/7 support for all orders",
    "Search FAQ...": "Search FAQ...",
    "New Season Tech": "New Season Tech",
    "Power your day with devices that feel futuristic":
      "Power your day with devices that feel futuristic",
    "Flagship phones, premium audio, and smart accessories curated for everyday performance.":
      "Flagship phones, premium audio, and smart accessories curated for everyday performance.",
    "Shop All": "Shop All",
    "Explore Phones": "Explore Phones",
    "Category": "Category",
    "Featured Products": "Featured Products",
    "View all": "View all",
    "Fast Shipping": "Fast Shipping",
    "Reliable delivery with tracking on every order.":
      "Reliable delivery with tracking on every order.",
    "Secure Payments": "Secure Payments",
    "Stripe-powered checkout with full encryption.":
      "Stripe-powered checkout with full encryption.",
    "Quality Promise": "Quality Promise",
    "Curated gadgets with verified quality checks.":
      "Curated gadgets with verified quality checks.",
    "Get early access deals": "Get early access deals",
    "Sign up to receive launches, price drops, and exclusive offers.":
      "Sign up to receive launches, price drops, and exclusive offers.",
    "Your email": "Your email",
    "Notify me": "Notify me",
    "Products": "Products",
    "Search by name or brand...": "Search by name or brand...",
    "All Brands": "All Brands",
    "All Groups": "All Groups",
    "All Types": "All Types",
    "Min €": "Min €",
    "Max €": "Max €",
    "Clear Filters": "Clear Filters",
    "Stock: {count}": "Stock: {count}",
    "Out of stock": "Out of stock",
    "Add to Cart": "Add to Cart",
    "Added to cart": "Added to cart",
    "Please select a color": "Please select a color",
    "Please select a size": "Please select a size",
    "Login first to leave a review.": "Login first to leave a review.",
    "Failed to submit review.": "Failed to submit review.",
    "Stripe is not ready yet. Please try again.":
      "Stripe is not ready yet. Please try again.",
    "Payment failed. Please try again.": "Payment failed. Please try again.",
    "Order failed": "Order failed",
    "Order creation failed. Please try again.":
      "Order creation failed. Please try again.",
    "Login failed": "Login failed",
    "Registration failed": "Registration failed",
    "Failed to send reset email": "Failed to send reset email",
    "Failed to reset password": "Failed to reset password",
    "Product added": "Product added",
    "Product updated": "Product updated",
    "Warranty Policy": "Warranty Policy",
    "1 year manufacturer warranty": "1 year manufacturer warranty",
    "Covers hardware defects": "Covers hardware defects",
    "Does not cover physical damage": "Does not cover physical damage",
    "CELL is a modern electronics brand delivering smartphones, accessories, and innovative tech products with quality and trust.":
      "CELL is a modern electronics brand delivering smartphones, accessories, and innovative tech products with quality and trust.",
    "Login first": "Login first",
    "Your Cart": "Your Cart",
    "Cart is empty": "Cart is empty",
    "Remove": "Remove",
    "Product not found": "Product not found",
    "Total:": "Total:",
    "Proceed to Checkout": "Proceed to Checkout",
    "Payment": "Payment",
    "Subtotal:": "Subtotal:",
    "Discount:": "Discount:",
    "Tax:": "Tax:",
    "Shipping:": "Shipping:",
    "Coupon code": "Coupon code",
    "Apply": "Apply",
    "Coupon applied": "Coupon applied",
    "Pay Now": "Pay Now",
    "Processing...": "Processing...",
    "Forgot Password": "Forgot Password",
    "Email": "Email",
    "Send Reset Link": "Send Reset Link",
    "If the email exists, a reset link was sent.":
      "If the email exists, a reset link was sent.",
    "Password": "Password",
    "Forgot password?": "Forgot password?",
    "Create an account": "Create an account",
    "Register": "Register",
    "Registration successful. You can login now.":
      "Registration successful. You can login now.",
    "Reset Password": "Reset Password",
    "New Password": "New Password",
    "Password reset successful. You can login now.":
      "Password reset successful. You can login now.",
    "My Orders": "My Orders",
    "No orders yet": "No orders yet",
    "Order ID:": "Order ID:",
    "Status:": "Status:",
    "Coupon:": "Coupon:",
    "Download Invoice": "Download Invoice",
    "Qty:": "Qty:",
    "Reviews": "Reviews",
    "Rating:": "Rating:",
    "Review submitted.": "Review submitted.",
    "Write your review...": "Write your review...",
    "Submit Review": "Submit Review",
    "No reviews yet.": "No reviews yet.",
    "Add to Wishlist": "Add to Wishlist",
    "Remove Wishlist": "Remove Wishlist",
    "Loading...": "Loading...",
    "Loading cart...": "Loading cart...",
    "Loading orders...": "Loading orders...",
    "Loading payment...": "Loading payment...",
    "Loading analytics...": "Loading analytics...",
    "Admin – Add Product": "Admin – Add Product",
    "Admin – Orders": "Admin – Orders",
    "Add Product": "Add Product",
    "Update Product": "Update Product",
    "All Products": "All Products",
    "Coupons": "Coupons",
    "Create Coupon": "Create Coupon",
    "Analytics": "Analytics",
    "Total Orders:": "Total Orders:",
    "Total Sales:": "Total Sales:",
    "Top Products": "Top Products",
    "No data": "No data",
    "Orders by Day": "Orders by Day",
    "My Profile": "My Profile",
    "Name": "Name",
    "Price": "Price",
    "Brand": "Brand",
    "Stock": "Stock",
    "Images (comma URLs)": "Images (comma URLs)",
    "Sizes (comma)": "Sizes (comma)",
    "Colors (comma)": "Colors (comma)",
    "CODE": "CODE",
    "Percent": "Percent",
    "Fixed": "Fixed",
    "Value": "Value",
    "Min Total": "Min Total",
    "Max Discount": "Max Discount",
    "Edit": "Edit",
    "Delete": "Delete",
    "Phone": "Phone",
    "Addresses": "Addresses",
    "Street": "Street",
    "City": "City",
    "Pincode": "Pincode",
    "Remove Address": "Remove",
    "+ Add Address": "+ Add Address",
    "Save Profile": "Save Profile",
    "Profile saved": "Profile saved",
    "Wishlist": "Wishlist",
    "No items in wishlist": "No items in wishlist",
    "View": "View",
    "Browse all products": "browse all products",
    "RAM": "RAM",
    "Storage": "Storage",
    "Max Price": "Max Price",
    "No brands found for this category. Try browsing all products.":
      "No brands found for this category. Try browsing all products.",
    "Warranty": "Warranty",
    "About Us": "About Us",
    "Shipping": "Shipping",
    "Product": "Product",
    "General": "General",
    "Smartphones": "Smartphones",
    "Tablets": "Tablets",
    "Wearables": "Wearables",
    "Accessories": "Accessories",
    "Audio": "Audio",
    "Chargers": "Chargers",
    "Cables": "Cables",
    "Power Banks": "Power Banks",
    "English": "English",
    "Italian": "Italian",
  },
  it: {
    "CELL": "HI-TECH",
    "HOME": "HOME",
    "DEVICE": "DISPOSITIVI",
    "CATEGORY": "CATEGORIA",
    "PRODUCTS": "PRODOTTI",
    "ADMIN": "ADMIN",
    "ADMIN ORDERS": "ORDINI ADMIN",
    "MY ORDERS": "I MIEI ORDINI",
    "PROFILE": "PROFILO",
    "WISHLIST": "PREFERITI",
    "WARRANTY": "GARANZIA",
    "FAQ": "FAQ",
    "ABOUT US": "CHI SIAMO",
    "Login": "Accedi",
    "Logout": "Esci",
    "ROHS | REACH | SVHC | CE COMPLIANT":
      "ROHS | REACH | SVHC | CONFORME CE",
    "Free shipping above €999": "Spedizione gratuita sopra €999",
    "1-year warranty on select devices":
      "Garanzia di 1 anno su dispositivi selezionati",
    "24/7 support for all orders": "Supporto 24/7 per tutti gli ordini",
    "Search FAQ...": "Cerca nelle FAQ...",
    "New Season Tech": "Tecnologia di nuova stagione",
    "Power your day with devices that feel futuristic":
      "Potenzia la tua giornata con dispositivi dal gusto futuristico",
    "Flagship phones, premium audio, and smart accessories curated for everyday performance.":
      "Smartphone top di gamma, audio premium e accessori smart selezionati per l’uso quotidiano.",
    "Shop All": "Acquista tutto",
    "Explore Phones": "Esplora telefoni",
    "Category": "Categoria",
    "Featured Products": "Prodotti in evidenza",
    "View all": "Vedi tutti",
    "Fast Shipping": "Spedizione veloce",
    "Reliable delivery with tracking on every order.":
      "Consegna affidabile con tracciamento per ogni ordine.",
    "Secure Payments": "Pagamenti sicuri",
    "Stripe-powered checkout with full encryption.":
      "Pagamento Stripe con crittografia completa.",
    "Quality Promise": "Qualità garantita",
    "Curated gadgets with verified quality checks.":
      "Gadget selezionati con controlli qualità verificati.",
    "Get early access deals": "Offerte in anteprima",
    "Sign up to receive launches, price drops, and exclusive offers.":
      "Iscriviti per ricevere lanci, ribassi di prezzo e offerte esclusive.",
    "Your email": "La tua email",
    "Notify me": "Avvisami",
    "Products": "Prodotti",
    "Search by name or brand...": "Cerca per nome o marca...",
    "All Brands": "Tutte le marche",
    "All Groups": "Tutti i gruppi",
    "All Types": "Tutti i tipi",
    "Min €": "Min €",
    "Max €": "Max €",
    "Clear Filters": "Pulisci filtri",
    "Stock: {count}": "Disponibilità: {count}",
    "Out of stock": "Esaurito",
    "Add to Cart": "Aggiungi al carrello",
    "Added to cart": "Aggiunto al carrello",
    "Please select a color": "Seleziona un colore",
    "Please select a size": "Seleziona una taglia",
    "Login first to leave a review.": "Accedi per lasciare una recensione.",
    "Failed to submit review.": "Invio recensione non riuscito.",
    "Stripe is not ready yet. Please try again.":
      "Stripe non è ancora pronto. Riprova.",
    "Payment failed. Please try again.": "Pagamento non riuscito. Riprova.",
    "Order failed": "Ordine non riuscito",
    "Order creation failed. Please try again.":
      "Creazione ordine non riuscita. Riprova.",
    "Login failed": "Accesso non riuscito",
    "Registration failed": "Registrazione non riuscita",
    "Failed to send reset email": "Invio email di reset non riuscito",
    "Failed to reset password": "Reimpostazione password non riuscita",
    "Product added": "Prodotto aggiunto",
    "Product updated": "Prodotto aggiornato",
    "Warranty Policy": "Politica di garanzia",
    "1 year manufacturer warranty": "Garanzia del produttore di 1 anno",
    "Covers hardware defects": "Copre difetti hardware",
    "Does not cover physical damage": "Non copre danni fisici",
    "CELL is a modern electronics brand delivering smartphones, accessories, and innovative tech products with quality and trust.":
      "CELL è un marchio di elettronica moderno che offre smartphone, accessori e prodotti tech innovativi con qualità e fiducia.",
    "Login first": "Accedi prima",
    "Your Cart": "Il tuo carrello",
    "Cart is empty": "Il carrello è vuoto",
    "Remove": "Rimuovi",
    "Product not found": "Prodotto non trovato",
    "Total:": "Totale:",
    "Proceed to Checkout": "Procedi al pagamento",
    "Payment": "Pagamento",
    "Subtotal:": "Subtotale:",
    "Discount:": "Sconto:",
    "Tax:": "Imposta:",
    "Shipping:": "Spedizione:",
    "Coupon code": "Codice coupon",
    "Apply": "Applica",
    "Coupon applied": "Coupon applicato",
    "Pay Now": "Paga ora",
    "Processing...": "Elaborazione...",
    "Forgot Password": "Password dimenticata",
    "Email": "Email",
    "Send Reset Link": "Invia link di reset",
    "If the email exists, a reset link was sent.":
      "Se l’email esiste, è stato inviato un link di reset.",
    "Password": "Password",
    "Forgot password?": "Password dimenticata?",
    "Create an account": "Crea un account",
    "Register": "Registrati",
    "Registration successful. You can login now.":
      "Registrazione riuscita. Ora puoi accedere.",
    "Reset Password": "Reimposta password",
    "New Password": "Nuova password",
    "Password reset successful. You can login now.":
      "Password reimpostata con successo. Ora puoi accedere.",
    "My Orders": "I miei ordini",
    "No orders yet": "Nessun ordine",
    "Order ID:": "ID ordine:",
    "Status:": "Stato:",
    "Coupon:": "Coupon:",
    "Download Invoice": "Scarica fattura",
    "Qty:": "Qtà:",
    "Reviews": "Recensioni",
    "Rating:": "Valutazione:",
    "Review submitted.": "Recensione inviata.",
    "Write your review...": "Scrivi la tua recensione...",
    "Submit Review": "Invia recensione",
    "No reviews yet.": "Nessuna recensione.",
    "Add to Wishlist": "Aggiungi ai preferiti",
    "Remove Wishlist": "Rimuovi dai preferiti",
    "Loading...": "Caricamento...",
    "Loading cart...": "Caricamento carrello...",
    "Loading orders...": "Caricamento ordini...",
    "Loading payment...": "Caricamento pagamento...",
    "Loading analytics...": "Caricamento analytics...",
    "Admin – Add Product": "Admin – Aggiungi prodotto",
    "Admin – Orders": "Admin – Ordini",
    "Add Product": "Aggiungi prodotto",
    "Update Product": "Aggiorna prodotto",
    "All Products": "Tutti i prodotti",
    "Coupons": "Coupon",
    "Create Coupon": "Crea coupon",
    "Analytics": "Analisi",
    "Total Orders:": "Ordini totali:",
    "Total Sales:": "Vendite totali:",
    "Top Products": "Prodotti migliori",
    "No data": "Nessun dato",
    "Orders by Day": "Ordini per giorno",
    "My Profile": "Il mio profilo",
    "Name": "Nome",
    "Price": "Prezzo",
    "Brand": "Marca",
    "Stock": "Disponibilità",
    "Images (comma URLs)": "Immagini (URL separati da virgola)",
    "Sizes (comma)": "Taglie (separate da virgola)",
    "Colors (comma)": "Colori (separati da virgola)",
    "CODE": "CODICE",
    "Percent": "Percentuale",
    "Fixed": "Fisso",
    "Value": "Valore",
    "Min Total": "Totale minimo",
    "Max Discount": "Sconto massimo",
    "Edit": "Modifica",
    "Delete": "Elimina",
    "Phone": "Telefono",
    "Addresses": "Indirizzi",
    "Street": "Via",
    "City": "Città",
    "Pincode": "CAP",
    "Remove Address": "Rimuovi",
    "+ Add Address": "+ Aggiungi indirizzo",
    "Save Profile": "Salva profilo",
    "Profile saved": "Profilo salvato",
    "Wishlist": "Preferiti",
    "No items in wishlist": "Nessun articolo nei preferiti",
    "View": "Vedi",
    "Browse all products": "sfoglia tutti i prodotti",
    "RAM": "RAM",
    "Storage": "Archiviazione",
    "Max Price": "Prezzo massimo",
    "No brands found for this category. Try browsing all products.":
      "Nessun brand trovato per questa categoria. Prova a sfogliare tutti i prodotti.",
    "Warranty": "Garanzia",
    "About Us": "Chi siamo",
    "Shipping": "Spedizione",
    "Product": "Prodotto",
    "General": "Generale",
    "Smartphones": "Smartphone",
    "Tablets": "Tablet",
    "Wearables": "Wearable",
    "Accessories": "Accessori",
    "Audio": "Audio",
    "Chargers": "Caricatori",
    "Cables": "Cavi",
    "Power Banks": "Power bank",
    "English": "Inglese",
    "Italian": "Italiano",
  },
};

function interpolate(text, vars) {
  return Object.keys(vars || {}).reduce(
    (acc, key) => acc.replaceAll(`{${key}}`, String(vars[key])),
    text
  );
}

export function I18nProvider({ children }) {
  const [lang, setLang] = useState(
    localStorage.getItem("lang") || "en"
  );

  useEffect(() => {
    localStorage.setItem("lang", lang);
    document.documentElement.lang = lang;
  }, [lang]);

  const t = useMemo(
    () => (key, vars = {}) => {
      const dict = translations[lang] || translations.en;
      const value = dict[key] || key;
      return interpolate(value, vars);
    },
    [lang]
  );

  const value = useMemo(() => ({ lang, setLang, t }), [lang, t]);

  return (
    <I18nContext.Provider value={value}>
      {children}
    </I18nContext.Provider>
  );
}

export function useI18n() {
  return useContext(I18nContext);
}
